<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pemutar Video Sinematik</title>
    <link rel="stylesheet" href="video.css">
</head>
<body>

    <!-- === HEADER === -->
    <header>
        <div class="logo-container">
            <img src="logo.png" alt="Logo" class="logo">
            <h1>Vidio-MP3Web</h1>
        </div>

        <nav class="menu">
            <a href="#" class="menu-item">Beranda</a>
            <a href="#" class="menu-item">Musik</a>
            <a href="#" class="menu-item">Video</a>
            <a href="#" class="menu-item">Tentang</a>
        </nav>
    </header>

    <!-- === KONTEN UTAMA === -->
    <main class="main-content">
        <section class="player-container">

            <!-- BAGIAN PEMUTAR VIDEO -->
            <div class="video-player-section">

                <div class="video-container">
                    <video id="video-player" controls poster="thumbnail.jpg">
                        <source src="static/video/sample1.mp4" type="video/mp4">
                        Browser kamu tidak mendukung pemutar video HTML5.
                    </video>
                </div>

                <!-- KONTROL VIDEO -->
                <div class="video-controls">
                    <button class="control-btn" id="prev-btn">‚èÆÔ∏è</button>
                    <button class="control-btn play" id="play-btn">‚ñ∂Ô∏è</button>
                    <button class="control-btn" id="next-btn">‚è≠Ô∏è</button>
                    <button class="control-btn" id="restart-btn">üîÑ</button>
                    <button class="control-btn" id="shuffle-btn">üîÄ</button>
                </div>

                <!-- PROGRESS BAR -->
                <div class="video-progress-container">
                    <div class="progress-bar" id="progress-bar">
                        <div class="progress" id="progress"></div>
                    </div>
                    <span id="time-current">0:00</span>
                    <span id="time-total">0:00</span>
                </div>

                <!-- KONTROL VOLUME -->
                <div class="video-volume-control">
                    üîä
                    <input type="range" id="video-volume-slider" min="0" max="1" step="0.05" value="0.8">
                </div>

                <!-- INFO VIDEO -->
                <div class="now-playing">
                    <h2 id="now-playing-title">Now Playing: Sample Video 1</h2>
                </div>
            </div>

            <!-- PLAYLIST DI BAWAH -->
            <div class="playlist-container" id="playlist">
                <div class="playlist-item active" data-src="static/video/sample1.mp4">
                    <div class="video-name">Sample Video 1</div>
                </div>
                <div class="playlist-item" data-src="static/video/sample2.mp4">
                    <div class="video-name">Sample Video 2</div>
                </div>
                <div class="playlist-item" data-src="static/video/sample3.mp4">
                    <div class="video-name">Sample Video 3</div>
                </div>
                <div class="playlist-item" data-src="static/video/sample4.mp4">
                    <div class="video-name">Sample Video 4</div>
                </div>
            </div>

        </section>
    </main>

    <!-- === SCRIPT KONTROL === -->
    <script>
        const video = document.getElementById('video-player');
        const playBtn = document.getElementById('play-btn');
        const progressBar = document.getElementById('progress-bar');
        const progress = document.getElementById('progress');
        const playlist = document.getElementById('playlist');
        const nowPlaying = document.getElementById('now-playing-title');
        const volumeSlider = document.getElementById('video-volume-slider');

        const timeCurrent = document.getElementById('time-current');
        const timeTotal = document.getElementById('time-total');

        let currentIndex = 0;
        const items = Array.from(document.querySelectorAll('.playlist-item'));

        /* === PLAY / PAUSE === */
        playBtn.addEventListener('click', () => {
            if (video.paused) {
                video.play();
                playBtn.textContent = '‚è∏Ô∏è';
            } else {
                video.pause();
                playBtn.textContent = '‚ñ∂Ô∏è';
            }
        });

        /* === PROGRESS BAR === */
        video.addEventListener('timeupdate', () => {
            const progressPercent = (video.currentTime / video.duration) * 100;
            progress.style.width = progressPercent + '%';
            updateTimeDisplay();
        });

        progressBar.addEventListener('click', (e) => {
            const newTime = (e.offsetX / progressBar.offsetWidth) * video.duration;
            video.currentTime = newTime;
        });

        /* === VOLUME CONTROL === */
        volumeSlider.addEventListener('input', () => {
            video.volume = volumeSlider.value;
        });

        /* === GANTI VIDEO DARI PLAYLIST === */
        playlist.addEventListener('click', (e) => {
            const item = e.target.closest('.playlist-item');
            if (!item) return;

            items.forEach(el => el.classList.remove('active'));
            item.classList.add('active');

            const src = item.getAttribute('data-src');
            video.src = src;
            nowPlaying.textContent = 'Now Playing: ' + item.querySelector('.video-name').textContent;
            video.play();
            playBtn.textContent = '‚è∏Ô∏è';
        });

        /* === UPDATE WAKTU === */
        function updateTimeDisplay() {
            const formatTime = (time) => {
                const minutes = Math.floor(time / 60);
                const seconds = Math.floor(time % 60).toString().padStart(2, '0');
                return `${minutes}:${seconds}`;
            };
            timeCurrent.textContent = formatTime(video.currentTime);
            timeTotal.textContent = formatTime(video.duration || 0);
        }

        /* === SAAT VIDEO SELESAI, LANJUT KE BERIKUTNYA === */
        video.addEventListener('ended', () => {
            currentIndex = (currentIndex + 1) % items.length;
            items[currentIndex].click();
        });
    </script>

</body>
</html>