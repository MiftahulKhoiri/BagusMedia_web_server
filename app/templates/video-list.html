<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Album Video - BAGUS MEDIA SERVER</title>

    <!-- CSS -->
    <link rel="stylesheet" href="/static/css/neon.css">
    <link rel="stylesheet" href="/static/css/video-list.css">

    <!-- Ikon -->
    <link rel="icon" href="{{ url_for('static', filename='icon/Video.png') }}">
</head>
<body>

<!-- Background Neon -->
<canvas id="neonCanvas"></canvas>

<!-- ============================
      HEADER
============================ -->
<header class="header">

    <!-- 
        PERBAIKAN:
        /home ‚Üí harus url_for('main.home')
    -->
    <a href="{{ url_for('main.home') }}" class="btn-home">üè† Home</a>

    <h1 class="title"> Video </h1>

    <!-- 
        PERBAIKAN:
        /video ‚Üí url_for('media.video_player')
    -->
    <a href="{{ url_for('media.video_player') }}" class="btn-open">üé¨ Pemutar</a>
</header>

<!-- ============================
      KONTEN LIST VIDEO
============================ -->
<main class="album-container">

    {% if video_files|length == 0 %}
        <p class="empty">Belum ada video yang diupload.</p>
    {% else %}

        <div class="video-grid">
            {% for file in video_files %}

            <!-- 
                PERBAIKAN:
                href="/video?play={{ file }}"
                ‚Üí url_for('media.video_player', play=file)
            -->
            <a class="video-item" href="{{ url_for('media.video_player', play=file) }}">

                <!-- Thumbnail otomatis -->
                <div class="thumb-box">
                    <video class="thumb-video" preload="metadata" muted>
                        
                        <!-- 
                            PERBAIKAN:
                            url_for('serve_media')
                            ‚Üí url_for('media.serve_media')
                        -->
                        <source src="{{ url_for('media.serve_media', folder='video', filename=file) }}">
                    </video>
                </div>

                <!-- Nama video -->
                <span class="video-name">{{ file }}</span>

            </a>

            {% endfor %}
        </div>

    {% endif %}
</main>

<!-- ============================
      FOOTER
============================ -->
<footer class="footer">
    ¬© BAGUS MEDIA SERVER
</footer>

<!-- Script -->
<script src="/static/Js/neon.js" defer></script>

</body>
</html>