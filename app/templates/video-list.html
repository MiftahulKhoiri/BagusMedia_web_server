{% extends "base.html" %}

{% block title %}Daftar Video - BAGUS MEDIA SERVER{% endblock %}

{% block css %}
<link rel="stylesheet" href="/static/css/video-list.css">
{% endblock %}

{% block content %}

<header class="page-header">
    <a href="{{ url_for('home') }}" class="btn-back">⬅ Kembali</a>
    <h1 class="page-title">Daftar Video</h1>
    <a href="{{ url_for('logout') }}" class="btn-logout">Logout</a>
</header>

<main class="video-container">

    {% if video_files %}
    <div class="video-grid">
        {% for vid in video_files %}
        <div class="video-item" data-file="{{ vid }}">
            <!-- thumbnail di-generate lewat /api/video-thumb -->
            <img class="video-thumb"
                 src="/api/video-thumb?file={{ vid }}"
                 alt="thumb-{{ vid }}"
                 onerror="this.src='/static/icon/video-icon.png'">
<div class="video-meta">
    <div class="video-name" title="{{ vid }}">{{ vid }}</div>
    <div class="video-buttons">
        <button class="btn-play" aria-label="Putar {{ vid }}">▶</button>

        <a class="btn-download"
           href="/media/video/{{ vid }}"
           download="{{ vid }}"
           title="Download {{ vid }}">⬇</a>
    </div>
</div>
        </div>
        {% endfor %}
    </div>
    {% else %}
        <p class="empty">Tidak ada file video.</p>
    {% endif %}

</main>

<!-- PLAYER BAWAH (muncul saat play) -->
<div id="video-player-box" class="video-player-box" aria-hidden="true">
    <div class="player-inner">
        <button id="close-player" class="close-player" title="Tutup">✕</button>
        <video id="video-player" controls preload="metadata"></video>
    </div>
</div>

<footer>
    <p>© {{ current_year }} BAGUS MEDIA SERVER</p>
</footer>

{% endblock %}

{% block script %}
<script src="/static/Js/video-list.js" defer></script>
{% endblock %}