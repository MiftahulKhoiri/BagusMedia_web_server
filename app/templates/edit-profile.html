<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Profil - BAGUS MEDIA SERVER</title>

    <!-- CSS -->
    <link rel="stylesheet" href="/static/css/neon.css">
    <link rel="stylesheet" href="/static/css/edit-profile.css">

    <!-- Ikon -->
    <link rel="icon" href="{{ url_for('static', filename='icon/profile.png') }}">
</head>
<body>

<!-- Background Neon -->
<canvas id="neonCanvas"></canvas>

<!-- ===============================
     HEADER
=============================== -->
<header class="header">
    <h1 class="edit-title">Edit Profil</h1>

    <!-- 
        PERBAIKAN:
        /profile → harus menggunakan url_for('profile.profile_page')
        karena route ini berada dalam Blueprint "profile".
    -->
    <a href="{{ url_for('profile.profile_page') }}" class="btn-back">⬅ Kembali</a>
</header>

<!-- ===============================
     COVER FOTO
=============================== -->
<div class="cover-area">
    <img id="cover-photo"
         src="{{ url_for('static', filename='profile/' ~ (profile.cover if profile.cover else 'cover.png')) }}"
         alt="Foto Cover">

    <!-- Input upload disembunyikan, dibuka via JS -->
    <input id="cover-input" type="file" accept="image/*" style="display:none;">
</div>

<!-- ===============================
     FOTO PROFIL
=============================== -->
<div class="profile-photo-area">
    <img id="profile-photo"
         src="{{ url_for('static', filename='profile/' ~ (profile.foto if profile.foto else 'profile.png')) }}"
         alt="Foto Profil">

    <!-- Input upload disembunyikan -->
    <input id="photo-input" type="file" accept="image/*" style="display:none;">
</div>

<!-- ===============================
     FORM EDIT PROFIL
=============================== -->
<main class="edit-box">

    <label>Nama Lengkap:</label>
    <input id="nama" type="text" value="{{ profile.nama }}">

    <label>Email:</label>
    <input id="email" type="email" value="{{ profile.email }}">

    <label>Jenis Kelamin:</label>
    <select id="jk">
        <option value="">- Pilih -</option>
        <option value="Laki-laki" {% if profile.jk == "Laki-laki" %}selected{% endif %}>Laki-laki</option>
        <option value="Perempuan" {% if profile.jk == "Perempuan" %}selected{% endif %}>Perempuan</option>
    </select>

    <label>Umur:</label>
    <input id="umur" type="number" value="{{ profile.umur }}">

    <label>Bio / Keterangan:</label>
    <textarea id="bio">{{ profile.bio }}</textarea>

    <!-- 
        Tombol simpan akan menggunakan JS (fetch)
        ke endpoint /api/save-profile (Blueprint profile)
    -->
    <button id="save-btn" class="save-btn">Simpan Perubahan</button>

    <!-- ===============================
         TOMBOL GANTI PASSWORD
    ================================ -->

    <!--
        PERBAIKAN:
        /change-password → harus pakai url_for('auth.change_password')
        Jika route change password ada di Blueprint auth.
        
        Jika tidak punya route change-password di backend,
        biarkan tetap hardcode.
        
        SEMENTARA aku buat versi aman:
        Tetap link langsung tanpa url_for supaya tidak error.
    -->

    <a href="/change-password" class="change-pass-btn">Ganti Password</a>

</main>

<!-- ===============================
     FOOTER
=============================== -->
<footer>
    <p>© {{ current_year }} BAGUS MEDIA SERVER di buat karena kegabutan</p>
</footer>

<!-- Script -->
<script src="/static/Js/neon.js" defer></script>
<script src="/static/Js/edit-profile.js" defer></script>

</body>
</html>